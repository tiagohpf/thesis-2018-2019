<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>fxTree AngularJS</title>

    <link href="/basepack/bootstrap-pt/3.0/css/bootstrap.min.css" rel="stylesheet">

    <link href="/fuxi/lib/jstree/3.0/themes/fuxi/style.css" rel="stylesheet" />

    <link type="text/css" rel="stylesheet" href="/fuxi/common/html/css/fuxi.css" />

    <script src="/basepack/jquery/1.9/jquery.min.js"></script>
    <script src="/basepack/bootstrap-pt/3.0/js/bootstrap.min.js"></script>

    <link type="text/css" rel="stylesheet" href="/fuxi/lib/codemirror/5.1/css/codemirror.css" />

    <!--min-->
    <script src="/fuxi/lib/jstree/3.0/jstree.min.js"></script>
    <script src="/fuxi/lib/jstree/3.0/jstree.misc.min.js"></script>
    <script src="/fuxi/lib/jstree/3.0/jstree-search-match.js"></script>

    <script src="/fuxi/lib/lodash/v3.0/lodash_3.0.1.min.js"></script>

    <script src="/fuxi/lib/codemirror/5.1/js/codemirror.js"></script>
    <script src="/fuxi/lib/codemirror/5.1/mode/xml/xml.js"></script>
    <script src="/fuxi/lib/codemirror/5.1/addon/edit/matchbrackets.js"></script>
    <script src="/fuxi/lib/codemirror/5.1/addon/comment/continuecomment.js"></script>
    <script src="/fuxi/lib/codemirror/5.1/addon/comment/comment.js"></script>
    <script src="/fuxi/lib/codemirror/5.1/mode/htmlmixed/htmlmixed.js"></script>
    <script src="/fuxi/lib/codemirror/5.1/mode/javascript/javascript.js"></script>

    <style>
        .CodeMirror {
            height: auto;
        }
    </style>

</head>
<body class="container" style="overflow:auto" ng-app="ngApp">

    <section class="well row">
        <h1><strong>fxTree -  AngularJS (directive)</strong></h1>
        <div class="row">
            <div id="ws-doc">
                <h3><i class="caret"></i> <strong>A directiva</strong></h3>
                <div style="padding: 0 20px" class="">
                    <div>
                        <p>A directiva fxTree foi desenvolvida de forma a se conseguir costumizar,
                        não é capaz de se auto instanciar, sendo necessário ter uma outra directiva que faça o <i>require</i> da mesma e que depois a instancie.</p>
                    </div>
                    <div>
                        <strong>O serviço (<i>treeServices</i>) exposto pela directiva permite:</strong>
                        <div>
                            <label><strong>prepareJSONData (data, additionalPlugins, additionalPluginConfigurations, additionalCoreConfigurations):</strong></label>
                            <span>Prepara um objecto com as configurações e dados necessários para o correcto carregamento do jstree.</span>
                        </div>
                        <div>
                            <label><strong>getTree (id):</strong></label>
                            <span>Retorna o objecto jstree que corresponda ao ID passado.</span>
                        </div>
                        <div>
                            <label><strong>deleteTree (id):</strong></label>
                            <span>Destroi o objecto jstree que corresponda ao ID passado.</span>
                        </div>
                        <div>
                            <label><strong>storeNewTree (id, tree, treeInfo):</strong></label>
                            <span>Guarda a nova tree.</span>
                        </div>
                        <div>
                            <label><strong>updateTree (id, tree, treeInfo):</strong></label>
                            <span>Actualiza os dados da tree que corresponda ao ID passado.</span>
                        </div>
                        <div>
                            <label><strong>existsTree (id):</strong></label>
                            <span>Verifica se existe a tree com o ID passado.</span>
                        </div>
                    </div>
                    <br />
                    <div>
                        <strong>A directiva apresenta 3 formas de inicialização:</strong>
                        <div>
                            <label><strong>callInitializeTreeWithJSON(data, additionalPlugins, additionalPluginConfigurations, additionalCoreConfigurations): </strong></label>
                            <p>Carrega a tree utilizando os nodos passados como parâmetro no método.</p>
                        </div>
                        <div>
                            <label><strong>callInitializeTreeWithRest(additionalPlugins, additionalPluginConfigurations, additionalCoreConfigurations): </strong></label>
                            <p>
                                Temos que ter definido o atributo <i>data-tree-load-url</i>.
                                O método irá utilizar este endereço para carregar os nodos via AJAX utilizando o módulo <i>$http.get()</i> do Angular JS.
                            </p>
                        </div>
                        <div>
                            <label><strong>callInitializeTreeEmpty(additionalPlugins, additionalPluginConfigurations, additionalCoreConfigurations): </strong></label>
                            <p>Permite instanciar a tree sem nodos</p>
                        </div>
                    </div>
                    <br />
                    <div>
                        <strong>A directiva permite fazer o override aos seguintes métodos:</strong>
                        <div>
                            <div>ref.treeElementClicked = function (ev, data) { };</div>
                            <div>ref.treeAfterLoad = function (tree) { };</div>
                            <div>ref.onRequestError = function (data, status) { };</div>
                            <div>ref.onRequestSuccess = function (tree, data) { };</div>
                        </div>
                        <br />
                        <div><strong>Pode ver o exemplo no ficheiro <a href="app.js" target="_blank">app.js</a></strong></div>
                    </div>
                </div>

                <h3><i class="caret"></i> <strong style="color:red">Issues (não corrigidos: <span id="number-bugs"></span>)</strong></h3>
                <div class="hidden">
                    <ul id="bugs-list"></ul>
                </div>
                <h3><i class="caret"></i> <strong style="color:green">New Features (não implementadas: <span id="number-newfeatures"></span>)</strong></h3>
                <div class="hidden">
                    <ul id="newfeatures-list"></ul>
                </div>

                <h3><i class="caret"></i> <strong>How To? Step by Step</strong></h3>
                <div style="padding: 0 20px" class="hidden">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td>
                                    Verificar que tem incluído os seguintes ficheiros:
                                    <ul>
                                        <li>
                                            <strong>CSS</strong>
                                            <ul>
                                                <li>Bootstrap (/basepack/bootstrap-pt/3.0/css/bootstrap.min.css)</li>
                                                <li>jsTree (/fuxi/lib/jstree/3.0/themes/fuxi/style.css)</li>
                                                <li>Fuxi (/fuxi/common/html/css/fuxi.css)</li>
                                            </ul>
                                        </li>
                                        <li>
                                            <strong>JS</strong>
                                            <ul>
                                                <li>jQuery (/basepack/jquery/1.9/jquery.min.js)</li>
                                                <li>Bootstrap (/basepack/bootstrap-pt/3.0/js/bootstrap.min.js)</li>
                                                <li>Lodash (/fuxi/lib/lodash/v3.0/lodash_3.0.1.min.js)</li>
                                                <li>jsTree (/fuxi/lib/jstree/3.0/jstree.min.js)</li>

                                                <li>Angular JS (/basepack/angularjs/1.3/angular.min.js)</li>
                                                <li>fxtree (/fuxi/components/jstree/dist/fxtree.js)</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Elemento DOM utilizado no Exemplo #1</strong><br />
                                    <textarea id="code" name="code" data-codemirror-mode="xml" codemirror-html-mode="true" class="fx-codemirror">
<div id="demo1"
    data-fx-inst-tree
    data-fx-tree
    data-tree-load-url="data.json">
</div>
                                    </textarea>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>

        <div style="padding:10px;margin:10px !important; background:white; border:1px solid #CCC" data-ng-controller="DemoController">
            <form name="formDemo">
                <p><strong><label for="demo1">Exemplo #1: Carregamento dos dados por ajax</label></strong></p>
                <div id="demo1"
                     data-fx-inst-tree
                     data-fx-tree
                     data-tree-load-url="data.json">
                </div>
            </form>
        </div>
    </section>
    <!--angular js 1.3-->
    <script src="/basepack/angularjs/1.3/angular.min.js"></script>

    <!--app module-->
    <script src="app.js"></script>

    <!--fx-jstree-->
    <script src="/fuxi/components/jstree/dist/fxtree.js"></script>
    <!--<script src="/fuxi/components/jstree/src/services/jstreeService.js"></script>
    <script src="/fuxi/components/jstree/src/controllers/jstreeController.js"></script>
    <script src="/fuxi/components/jstree/src/directives/jstreeDirective.js"></script>-->

    <script>
        $(document).ready(function () {

            $("#number-bugs").text($("#bugs-list li").length);
            $("#number-newfeatures").text($("#newfeatures-list li").length);

            $("#ws-doc h3").css("cursor", "pointer").on('click', function () {
                $(this).next().toggleClass("hidden");
                refreshCodeMirrorObjs();
            });

            function refreshCodeMirrorObjs() {
                $.each(codeMirrorObjs, function () {
                    this.refresh();
                });
            }
            var codeMirrorObjs = [];
            $(".fx-codemirror").each(function () {
                codeMirrorObjs.push(CodeMirror.fromTextArea(this, {
                    mode: $(this).data("codemirror-mode"),
                    htmlMode: $(this).data("codemirror-html-mode") || false,
                    lineNumbers: true,
                    readOnly: true
                }));
            });

        });
    </script>
    
</body>
</html>
