{
    "header": {
        "seo": {
            "text": "designerFlow___modalTitle___connEvaluation"
        }
    },
    "wizard": [
        {
            "components": [
                {
                    "type": "initParameters",
                    "details": [
                        {
                            "id": "connectionId",
                            "type": "label",
                            "text": "designerFlow___connections___connId",
                            "hidden": true,
                            "pathToValue": [
                                "line",
                                "id"
                            ]
                        },
                        {
                            "id": "shapeFromType",
                            "type": "label",
                            "hidden": true,
                            "pathToValue": [
                                "line",
                                "shapes",
                                "from",
                                "type"
                            ]
                        },
                        {
                            "type": "textbox",
                            "id": "connectionName",
                            "text": "designerFlow___connections___connName",
                            "pathToValue": [
                                "line",
                                "dataRecs",
                                "name"
                            ],
                            "parameters": [
                                {
                                    "key": "updatePageParameter",
                                    "value": {
                                        "connectionsOrder": {
                                            "sendEvent": [
                                                {
                                                    "key": "updateConnectionName",
                                                    "value": {
                                                        "id": "{{connectionId}}",
                                                        "name": "{{connectionName}}"
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                }
                            ]
                        },
                        {
                            "type": "number",
                            "_subType": "number",
                            "id": "lifeSpan",
                            "text": "designerFlow___connections___numberOfChances",
                            "min": 1,
                            "pathToValue": [
                                "line",
                                "dataRecs",
                                "$this['lifeSpan'] > 0 ? $this['lifeSpan'] : 1"
                            ]
                        },
                        {
                            "type": "custom-mentions",
                            "id": "conditionEval",
                            "text": "designerFlow___connections___conditionEval",
                            "pathToValue": [
                                "line",
                                "dataRecs",
                                "conditionEval",
                                "$this.toString()"
                            ],
                            "pathToValueList": [
                                "config::designerFlowComponent",
                                "variables",
                                "@mentionsComponentFormat($this)"
                            ],
                            "dynamicProps": {
                                "hidden": "'{{shapeFromType}}' == 'programIn'",
                                "value": "'{{shapeFromType}}' == 'programIn' ? 'true' : '{{conditionEval}}'"
                            }
                        },
                        {
                            "type": "wct-tuple-list",
                            "id": "outputVariables",
                            "text": "designerFlow___setValues",
                            "min": 0,
                            "pathToValueList": [
                                "line",
                                "dataRecs",
                                "outputVariables",
                                "@findOutputVariables($this)"
                            ],
                            "details": [
                                {
                                    "type": "wct-ng-select",
                                    "id": "variableName",
                                    "text": "designerFlow___variableName",
                                    "class": "col-sm-4",
                                    "pathToValueList": [
                                        "config::designerFlowComponent",
                                        "variables",
                                        "@formatValueList($this,'displayName','displayName', {\"line1\": \"displayName\",\"line2\": \"description\"})",
                                        "@formatValueListTwoLines($this)"
                                    ],
                                    "pathToValue": [
                                        "variableName"
                                    ]
                                },
                                {
                                    "type": "custom-mentions",
                                    "id": "path",
                                    "class": "col-sm-5",
                                    "text": "designerFlow___newValue",
                                    "pathToValue": [
                                        "path",
                                        "$this.toString()"
                                    ],
                                    "pathToValueList": [
                                        "config::designerFlowComponent",
                                        "variables",
                                        "@mentionsComponentFormat($this)"
                                    ],
                                    "parameters": [
                                        {
                                            "key": "updatePageParameter",
                                            "value": {
                                                "pathType": {
                                                    "value": "{{@fv()@getPathType(@replaceTagVars('path'))}}"
                                                }
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "input-select",
                                    "id": "pathType",
                                    "text": "designerFlow___valueType",
                                    "class": "col-sm-3",
                                    "placeholder": null,
                                    "valueList": [
                                        {
                                            "key": "string",
                                            "value": "designerFlow___valueTypeOptions___string"
                                        },
                                        {
                                            "key": "number",
                                            "value": "designerFlow___valueTypeOptions___number"
                                        },
                                        {
                                            "key": "boolean",
                                            "value": "designerFlow___valueTypeOptions___boolean"
                                        },
                                        {
                                            "key": "reset",
                                            "value": "designerFlow___valueTypeOptions___reset"
                                        },
                                        {
                                            "key": "null",
                                            "value": "designerFlow___valueTypeOptions___empty"
                                        }
                                    ],
                                    "pathToValue": [
                                        "@evaluatePathType($this['pathType'],$this['path'])"
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "wct-tuple-list",
                            "id": "logicExpressions",
                            "text": "designerFlow___scriptsExecution",
                            "min": 0,
                            "pathToValueList": [
                                "line",
                                "dataRecs",
                                "logicExpressions"
                            ],
                            "details": [
                                {
                                    "type": "custom-mentions",
                                    "id": "expression",
                                    "text": "designerFlow___scriptExpression",
                                    "pathToValue": [
                                        "expression"
                                    ],
                                    "pathToValueList": [
                                        "config::designerFlowComponent",
                                        "variables",
                                        "@mentionsComponentFormat($this)"
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "components": [
                {
                    "type": "initParameters",
                    "details": [
                        {
                            "type": "label",
                            "text": null,
                            "class": "col-sm-9",
                            "value": "designerFlow___connections___setPriority",
                            "style": {
                                "padding-left": "15px"
                            }
                        },
                        {
                            "type": "label",
                            "text": null,
                            "class": "col-sm-3 text-right",
                            "value": "Default",
                            "title": "designerFlow___connections___setDefault",
                            "style": {
                                "padding-right": "15px"
                            }
                        },
                        {
                            "type": "bs-order-connections",
                            "id": "connectionsOrder",
                            "text": null,
                            "pathToValue": [
                                "fatherConnections"
                            ]
                        },
                        {
                            "id": "defaultAlert",
                            "type": "label",
                            "class": "default-connection-warning",
                            "text": null,
                            "value": "<div class='alert alert-info'><i class='fa fa-info'></i> {{@fv()@i18n('designerFlow___connections___defaultWarning')}}</div>",
                            "dynamicProps": {
                                "hidden": "!{{config::connectionsOrder___hasDefault}}"
                            }
                        }
                    ]
                }
            ]
        }
    ],
    "buttons": [
        {
            "key": "cancel",
            "text": "generic___operations___cancel",
            "class": "btn-force-default btn-default"
        },
        {
            "key": "submit",
            "text": "generic___operations___save",
            "class": "btn-primary",
            "dynamicProps": {
                "text": "{{line___dataRecs___openNextShape}} ? 'generic___operations___next' : 'generic___operations___save'"
            },
            "parameters": [
                {
                    "key": "updatePageParameter",
                    "value": {
                        "designerFlowComponent": {
                            "sendEvent": [
                                {
                                    "_key": "setConnectionShapes",
                                    "value": {
                                        "connectionId": "{{connectionId}}",
                                        "from": "{{connectsFrom}}",
                                        "to": "{{connectsTo}}"
                                    }
                                },
                                {
                                    "key": "saveDataRecs",
                                    "value": {
                                        "connectionId": "{{connectionId}}",
                                        "dataRecs": {
                                            "name": "{{connectionName}}",
                                            "conditionEval": "{{conditionEval}}",
                                            "outputVariables": "{{@fv()@mapOutputVariables(@getJsonParam('outputVariables').value)}}",
                                            "logicExpressions": "{{logicExpressions}}",
                                            "lifeSpan": "{{lifeSpan}}"
                                        }
                                    }
                                },
                                {
                                    "key": "saveConnectionsOptions",
                                    "value": "{{connectionsOrder}}"
                                }
                            ]
                        }
                    }
                }
            ]
        }
    ]
}