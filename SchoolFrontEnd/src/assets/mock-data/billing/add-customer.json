{
  "type": "initParameters",
  "id": "newCustomer",
  "hidden": true,
  "class": "customer-create-form",
  "details": [
    {
      "type": "textbox",
      "id": "customerName",
      "text": "billing___customer___name",
      "placeholder": "billing___customer___name",
      "class": "col-sm-8",
      "hidden": true,
      "validator": {
        "required": [
          true,
          "warnings___fieldRequired"
        ]
      }
    },
    {
      "type": "textbox",
      "id": "customerVat",
      "text": "billing___customer___vat",
      "placeholder": "billing___customer___vat",
      "class": "col-sm-4",
      "hidden": true,
      "validator": {
        "required": [
          true,
          "warnings___fieldRequired"
        ]
      }
    },

    {
      "type": "textbox",
      "id": "addressName",
      "text": "billing___customer___address",
      "placeholder": "billing___customer___address",
      "hidden": true,
      "validator": {
        "required": [
          true,
          "warnings___fieldRequired"
        ]
      }
    },
    {
      "type": "textbox",
      "id": "city",
      "text": "billing___customer___city",
      "placeholder": "billing___customer___city",
      "class": "col-sm-4",
      "hidden": true,
      "validator": {
        "required": [
          true,
          "warnings___fieldRequired"
        ]
      }
    },
    {
      "type": "wct-ng-select",
      "id": "country",
      "text": "billing___customer___country",
      "placeholder": "billing___customer___country",
      "class": "col-sm-4",
      "hidden": true,
      "templateOfValueList": "{\"key\":\"{{value}}\",\"value\":\"{{text}}\"}",
      "validator": {
        "required": [
          true,
          "warnings___fieldRequired"
        ]
      },
      "urlResource": [
        {
          "key": "path",
          "value": "assets/mock-data/billing/countries.json"
        }
      ],
      "pathToValueList": "countries"

    },
    {
      "type": "textbox",
      "id": "email",
      "text": "billing___customer___email",
      "placeholder": "billing___customer___email",
      "class": "col-sm-8",
      "hidden": true,
      "validator": {
        "required": [
          true,
          "warnings___fieldRequired"
        ],
        "regex": [
          "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
          "Invalid email"
        ]
      }
    },
    {
      "type": "textbox",
      "id": "phone",
      "text": "billing___customer___phone",
      "placeholder": "billing___customer___phone",
      "class": "col-sm-4",
      "hidden": true,
      "validator": {
        "required": [
          true,
          "warnings___fieldRequired"
        ],
        "regex": [
          "[(+]*[0-9]+[()+. -]*",
          "Invalid phone number"
        ]
      }
    },

    {
      "type": "operations",
      "id": "newCustomerCancel",
      "hidden": true,
      "_class": "col-sm-3",
      "operations": [
        {
          "size": 2,
          "parameters": [
            {
              "type": "submit",
              "text": "billing___customer___create",
              "class": "btn-primary",
              "_mappingId": [
                "customerName"
              ],              
              "mappingId": [
                "customerName",
                "customerVat",
                "addressName",
                "city",
                "country",
                "email",
                "phone"
              ],
              "parameters": [
                {
                  "key": "onSuccess",
                  "value": {
                    "updatePageParameters": {
                      "newCustomer": {
                        "hidden": true
                      },
                      "customerName"     :{"hidden": true},
                      "email"            :{"hidden": true},
                      "addressName"      :{"hidden": true},
                      "city"             :{"hidden": true},
                      "country"          :{"hidden": true},
                      "customerVat"      :{"hidden": true},
                      "phone"            :{"hidden": true},
                      "spacer"           :{"hidden": true},
                      "newCustomerButtons": {"hidden": true},
                      "newCustomerCancel":{"hidden": true},

                      "customerListCards": {
                        "hidden": false,
                        "lazyLoading": false
                      },
                      "addCustomerButton": {
                        "hidden": false
                      }
                    },
                    "keepModal": true
                  }
                },
                {
                  "key": "errorText",
                  "value": ""
                },
                {
                  "key": "errorTextPosition",
                  "value": "top-center"
                },
                {
                  "key": "requestEndpoint",
                  "value": "{{BillingService}}/customers"
                },
                {
                  "key": "requestType",
                  "value": "POST"
                },
                {
                  "key": "requestHeaders",
                  "value": {
                    "Content-Type": "application/json",
                    "Authorization": "Bearer {{token}}"
                  }
                },
                {
                  "key": "requestBody",
                  "type": "json",
                  "value": {
                    "group": "{{IXS_id}}",
                    "vat": "{{customerVat}}",
                    "name": "{{customerName}}",
                    "addressName": "{{addressName}}",
                    "city": "{{city}}",
                    "country": "{{country___label}}",
                    "zip": "0000-000",
                    "email": "{{email}}",
                    "phone": "{{phone}}"
                  }
                }
              ]
            },
            {
              "type": "updatePage",
              "text": "billing___customer___cancel",
              "class": "btn-default",
              "parameters": [
                {
                  "key": "updatePageParameter",
                  "value": {
                    "newCustomer": {
                      "hidden": false
                    },
                    "customerName"     :{"hidden": true},
                    "email"            :{"hidden": true},
                    "addressName"      :{"hidden": true},
                    "city"             :{"hidden": true},
                    "country"          :{"hidden": true},
                    "customerVat"      :{"hidden": true},
                    "phone"            :{"hidden": true},
                    "spacer"           :{"hidden": true}, 
                    "newCustomerButtons":{"hidden": true},
                    "newCustomerCancel":{"hidden": true},
                    "customerListCards": {
                      "hidden": false,
                      "lazyLoading": false
                    },
                    "addCustomerButton": {
                      "hidden": false
                    }
                  }
                },{
                  "key":"keepModal",
                  "value": true
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}